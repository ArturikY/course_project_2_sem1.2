# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω

## üìç –ì–¥–µ –º–µ–Ω—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 1. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (index.html) - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

–û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞:

#### **–ü–æ—Ä–æ–≥ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (threshold)**
- **–ì–¥–µ:** –ü–æ–ª–µ "–ü–æ—Ä–æ–≥ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–º–∏–Ω. –î–¢–ü –≤ –∑–æ–Ω–µ)"
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –î–¢–ü –≤ —è—á–µ–π–∫–µ, —á—Ç–æ–±—ã –æ–Ω–∞ —Å—á–∏—Ç–∞–ª–∞—Å—å –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–æ–π
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 5
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 1-50
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - `1` = –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ –∑–æ–Ω—ã, –≥–¥–µ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 –î–¢–ü (–º–Ω–æ–≥–æ –º–µ–ª–∫–∏—Ö –∑–æ–Ω)
  - `5` = –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–æ–Ω—ã —Å 5+ –î–¢–ü (–±–∞–ª–∞–Ω—Å)
  - `10` = –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–æ–Ω—ã —Å 10+ –î–¢–ü (—Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –æ–ø–∞—Å–Ω—ã–µ)

#### **–†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ (gridSize)**
- **–ì–¥–µ:** –ü–æ–ª–µ "–†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ (–º–µ—Ç—Ä—ã)"
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –†–∞–∑–º–µ—Ä –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏ –≤ –º–µ—Ç—Ä–∞—Ö
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 250 –º–µ—Ç—Ä–æ–≤
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 50-1000 –º–µ—Ç—Ä–æ–≤
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - `100` = –º–µ–ª–∫–∏–µ —è—á–µ–π–∫–∏ (100√ó100–º), –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π, –±–æ–ª—å—à–µ –∑–æ–Ω
  - `250` = —Å—Ä–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏ (250√ó250–º), –±–∞–ª–∞–Ω—Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
  - `500` = –∫—Ä—É–ø–Ω—ã–µ —è—á–µ–π–∫–∏ (500√ó500–º), –º–µ–Ω—å—à–µ –∑–æ–Ω, –Ω–æ –∫—Ä—É–ø–Ω–µ–µ –æ–±–ª–∞—Å—Ç–∏

#### **–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ (period)**
- **–ì–¥–µ:** –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ "–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞"
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ó–∞ –∫–∞–∫–æ–π –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –î–¢–ü
- **–í–∞—Ä–∏–∞–Ω—Ç—ã:**
  - `–í—Å–µ –¥–∞–Ω–Ω—ã–µ` = –≤—Å–µ –î–¢–ü –∏–∑ —Ñ–∞–π–ª–∞
  - `–ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π` = —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
  - `–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π` = —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
  - `–ü–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π` = —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–≤–∞—Ä—Ç–∞–ª
  - `–ü–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥` = —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥

---

### 2. –í –∫–æ–¥–µ (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

#### **–í index.html (—Å—Ç—Ä–æ–∫–∏ ~330-333)**

```javascript
// –ü–æ—Ä–æ–≥ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
<input type="number" id="threshold" value="5" min="1" max="50">

// –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏
<input type="number" id="gridSize" value="250" min="50" max="1000" step="50">
```

#### **–í api/hotspots.php (—Å—Ç—Ä–æ–∫–∏ 24-26)**

```php
$period = isset($_GET['period']) ? trim($_GET['period']) : '30d';
$threshold = isset($_GET['threshold']) ? (int)$_GET['threshold'] : 5;
$gridSize = isset($_GET['grid']) ? (int)$_GET['grid'] : 250;
```

#### **–í api/data_loader.php (—Å—Ç—Ä–æ–∫–∏ 311, 403)**

```php
// –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
public function getHotspotsStats($bbox, $period = '30d', $threshold = 5, $gridSize = 250)

// –†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å—á–µ—Ç —à–∞–≥–∞ —Å–µ—Ç–∫–∏:
$latStep = $gridSize / 111000;  // ~111 –∫–º = 1 –≥—Ä–∞–¥—É—Å —à–∏—Ä–æ—Ç—ã
$lonStep = $gridSize / (111000 * cos(deg2rad(($minLat + $maxLat) / 2)));
```

#### **–£—Ä–æ–≤–Ω–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (api/hotspots.php, —Å—Ç—Ä–æ–∫–∏ 54-62)**

```php
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –î–¢–ü
$riskLevel = 'low';
if ($count >= 20) {
    $riskLevel = 'high';      // –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
} elseif ($count >= 10) {
    $riskLevel = 'medium';    // –û—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç
} else {
    $riskLevel = 'low';       // –ß–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç
}
```

**–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥–∏ —É—Ä–æ–≤–Ω–µ–π:**
- –ù–∏–∑–∫–∏–π ‚Üí –°—Ä–µ–¥–Ω–∏–π: –∏–∑–º–µ–Ω–∏—Ç–µ `>= 10` –Ω–∞ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –°—Ä–µ–¥–Ω–∏–π ‚Üí –í—ã—Å–æ–∫–∏–π: –∏–∑–º–µ–Ω–∏—Ç–µ `>= 20` –Ω–∞ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

---

## üé® –¶–≤–µ—Ç–∞ –∑–æ–Ω

–¶–≤–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ `index.html` (—Å—Ç—Ä–æ–∫–∏ ~530-535):

```javascript
const colors = {
    'low': '#000000',      // –ß–µ—Ä–Ω—ã–π - 5-9 –î–¢–ü
    'medium': '#f39c12',  // –û—Ä–∞–Ω–∂–µ–≤—ã–π - 10-19 –î–¢–ü
    'high': '#e74c3c'     // –ö—Ä–∞—Å–Ω—ã–π - 20+ –î–¢–ü
};
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏:** –ö–∞—Ä—Ç–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —è—á–µ–π–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–º `gridSize` –º–µ—Ç—Ä–æ–≤
2. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –î–¢–ü:** –ö–∞–∂–¥–æ–µ –î–¢–ü –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —è—á–µ–π–∫—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
3. **–ü–æ–¥—Å—á–µ—Ç:** –í –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –î–¢–ü
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —è—á–µ–π–∫–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –î–¢–ü >= `threshold`
5. **–û–∫—Ä–∞—Å–∫–∞:** –Ø—á–µ–π–∫–∏ –æ–∫—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –ø–æ —É—Ä–æ–≤–Ω—é –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (low/medium/high)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (–º–Ω–æ–≥–æ –º–µ–ª–∫–∏—Ö –∑–æ–Ω):
- –ü–æ—Ä–æ–≥: `2-3`
- –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏: `100-150` –º–µ—Ç—Ä–æ–≤

### –î–ª—è –æ–±—â–µ–≥–æ –æ–±–∑–æ—Ä–∞ (–∫—Ä—É–ø–Ω—ã–µ –æ–ø–∞—Å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã):
- –ü–æ—Ä–æ–≥: `10-15`
- –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏: `400-500` –º–µ—Ç—Ä–æ–≤

### –î–ª—è –±–∞–ª–∞–Ω—Å–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
- –ü–æ—Ä–æ–≥: `5`
- –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏: `250` –º–µ—Ç—Ä–æ–≤

---

## üîç –ü—Ä–∏–º–µ—Ä—ã URL –∑–∞–ø—Ä–æ—Å–æ–≤

```
# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥, –º–µ–ª–∫–∞—è —Å–µ—Ç–∫–∞
api/hotspots.php?bbox=37.3,55.5,37.8,56.0&threshold=2&grid=100

# –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥, –∫—Ä—É–ø–Ω–∞—è —Å–µ—Ç–∫–∞
api/hotspots.php?bbox=37.3,55.5,37.8,56.0&threshold=15&grid=500

# –¢–æ–ª—å–∫–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
api/hotspots.php?bbox=37.3,55.5,37.8,56.0&period=30d&threshold=5&grid=250
```









