# Настройка источника данных

Проект поддерживает работу как с базой данных MySQL, так и с NDJSON файлом.

## Переключение источника данных

Откройте файл `api/config.php` и измените параметр:

```php
'data_source' => 'file',  // 'file' или 'database'
```

## Режим работы с файлом (file)

**Преимущества:**
- Не требует установки и настройки MySQL
- Работает сразу после загрузки данных
- Подходит для демонстрации и тестирования

**Настройки:**
```php
'file' => [
    'ndjson_path' => __DIR__ . '/../moskva.ndjson', // Путь к файлу
    'cache_enabled' => true,  // Кэширование в памяти
    'cache_ttl' => 300  // Время жизни кэша (секунды)
]
```

**Требования:**
- Файл `moskva.ndjson` должен находиться в корне проекта
- Файл должен быть в формате NDJSON (Newline Delimited JSON)

## Режим работы с БД (database)

**Преимущества:**
- Быстрее для больших объемов данных
- Поддержка сложных запросов
- Индексы для ускорения поиска

**Настройки:**
```php
'database' => [
    'host' => 'localhost',
    'dbname' => 'dtp_analysis',
    'user' => 'root',
    'pass' => '',
    'charset' => 'utf8mb4'
]
```

**Требования:**
- MySQL/MariaDB должен быть запущен
- База данных `dtp_analysis` должна быть создана
- Таблица `accidents` должна быть заполнена данными

## Производительность

- **Файл**: Медленнее для больших объемов, но достаточно для курсового проекта
- **БД**: Быстрее, особенно с индексами, но требует настройки

## Рекомендация

Для курсового проекта используйте режим `file` - он проще в настройке и не требует БД.









