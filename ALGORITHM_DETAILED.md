# üîç –ü–û–õ–ù–´–ô –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (Backend)](#–∑–∞–≥—Ä—É–∑–∫–∞-–¥–∞–Ω–Ω—ã—Ö-backend)
3. [–†–∞—Å—á–µ—Ç –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω](#—Ä–∞—Å—á–µ—Ç-–æ–ø–∞—Å–Ω—ã—Ö-–∑–æ–Ω)
4. [–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Frontend](#–ø–µ—Ä–µ–¥–∞—á–∞-–¥–∞–Ω–Ω—ã—Ö-–Ω–∞-frontend)
5. [–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ](#–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ-–Ω–∞-–∫–∞—Ä—Ç–µ)
6. [–£–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è](#—É–∑–∫–∏–µ-–º–µ—Å—Ç–∞-–∏-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  index.html     ‚îÇ ‚Üê Frontend (–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã)
‚îÇ  (JavaScript)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP GET –∑–∞–ø—Ä–æ—Å—ã
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  api/           ‚îÇ ‚Üê Backend API (PHP)
‚îÇ  ‚îú‚îÄ config.php  ‚îÇ
‚îÇ  ‚îú‚îÄ data_loader.php ‚îÇ
‚îÇ  ‚îú‚îÄ accidents.php   ‚îÇ
‚îÇ  ‚îî‚îÄ hotspots.php   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ        ‚îÇ
    ‚ñº        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MySQL  ‚îÇ ‚îÇ NDJSON   ‚îÇ
‚îÇ (–ë–î)   ‚îÇ ‚îÇ (—Ñ–∞–π–ª)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `api/config.php` ‚Üí `'data_source' => 'file'` –∏–ª–∏ `'database'`
- **–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º:** `'file'` (—á—Ç–µ–Ω–∏–µ –∏–∑ `moskva.ndjson`)

---

## üì• –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• (BACKEND)

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (`api/data_loader.php`)

```php
// –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç DataLoader
$loader = new DataLoader($config);

// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
if ($config['data_source'] === 'database') {
    // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MySQL
} else {
    // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª moskva.ndjson
}
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –î–¢–ü (`getAccidentsFromFile()`)

**–ü—É—Ç—å:** `api/data_loader.php:74-187`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª moskva.ndjson (–ø–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ)
2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ø–µ—Ä–≤—ã–µ 10000 —Å—Ç—Ä–æ–∫ (—Å—Ç—Ä–æ–∫–∞ 90)
3. –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:
   ‚îú‚îÄ –ü–∞—Ä—Å–∏–Ω–≥ JSON (json_decode)
   ‚îú‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç [lon, lat]
   ‚îú‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ bbox (–±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
   ‚îú‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
   ‚îî‚îÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤ $filtered
4. –í–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–µ–π
```

**–ö–æ–¥:**
```php
$maxLinesToRead = 10000; // –õ–ò–ú–ò–¢ –°–¢–†–û–ö
$handle = fopen($filePath, 'r');
while (($line = fgets($handle)) !== false && 
       $lineNum < $maxLinesToRead && 
       $count < $limit) {
    $feat = json_decode($line, true);
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è...
    $filtered[] = [...];
}
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚è±Ô∏è **–í—Ä–µ–º—è:** ~0.5-2 —Å–µ–∫ –¥–ª—è 10000 —Å—Ç—Ä–æ–∫
- üíæ **–ü–∞–º—è—Ç—å:** ~10-50 MB (–ø–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ)
- üîÑ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ß–∏—Ç–∞–µ—Ç –ø–æ—Å—Ç—Ä–æ—á–Ω–æ, –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å

---

## üéØ –†–ê–°–ß–ï–¢ –û–ü–ê–°–ù–´–• –ó–û–ù

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ (`getHotspotsFromFile()`)

**–ü—É—Ç—å:** `api/data_loader.php:403-532`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ü–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
   ‚îú‚îÄ bbox (–≥—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ä—Ç—ã)
   ‚îú‚îÄ gridSize (—Ä–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ –≤ –º–µ—Ç—Ä–∞—Ö, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 250–º)
   ‚îú‚îÄ threshold (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –î–¢–ü –≤ –∑–æ–Ω–µ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
   ‚îî‚îÄ period (–ø–µ—Ä–∏–æ–¥ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä "30d")

2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ —è—á–µ–µ–∫:
   ‚îú‚îÄ –†–∞—Å—á–µ—Ç —à–∞–≥–∞ —Å–µ—Ç–∫–∏:
   ‚îÇ   ‚îú‚îÄ latStep = gridSize / 111000 (1¬∞ ‚âà 111 –∫–º)
   ‚îÇ   ‚îî‚îÄ lonStep = gridSize / (111000 * cos(—Å—Ä–µ–¥–Ω—è—è —à–∏—Ä–æ—Ç–∞))
   ‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ —è—á–µ–µ–∫:
   ‚îÇ   ‚îî‚îÄ –î–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏: [minLat, maxLat, minLon, maxLon, count=0, severeCount=0]
   ‚îî‚îÄ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è—á–µ–µ–∫ = (—à–∏—Ä–∏–Ω–∞_bbox / latStep) * (–≤—ã—Å–æ—Ç–∞_bbox / lonStep)

3. –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –î–¢–ü –ø–æ —è—á–µ–π–∫–∞–º:
   ‚îú‚îÄ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ø–µ—Ä–≤—ã–µ 10000 —Å—Ç—Ä–æ–∫ (—Å—Ç—Ä–æ–∫–∞ 454)
   ‚îú‚îÄ –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:
   ‚îÇ   ‚îú‚îÄ –ü–∞—Ä—Å–∏–Ω–≥ JSON
   ‚îÇ   ‚îú‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
   ‚îÇ   ‚îú‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ bbox
   ‚îÇ   ‚îú‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ
   ‚îÇ   ‚îî‚îÄ –ü–æ–∏—Å–∫ —è—á–µ–π–∫–∏: lat ‚àà [minLat, maxLat] AND lon ‚àà [minLon, maxLon]
   ‚îÇ       ‚îî‚îÄ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ count –∏ severeCount —è—á–µ–π–∫–∏
   ‚îî‚îÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —è—á–µ–π–∫–∏ —Å count >= threshold

4. –í–æ–∑–≤—Ä–∞—Ç –º–∞—Å—Å–∏–≤–∞ —è—á–µ–µ–∫
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ —Å–µ—Ç–∫–∏:**
```php
// –î–ª—è bbox –ú–æ—Å–∫–≤—ã (37.0-38.0, 55.5-56.0) –∏ gridSize=250–º:
$latStep = 250 / 111000 = 0.00225¬∞ ‚âà 250 –º–µ—Ç—Ä–æ–≤
$lonStep = 250 / (111000 * cos(55.75¬∞)) ‚âà 0.0039¬∞ ‚âà 250 –º–µ—Ç—Ä–æ–≤

// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è—á–µ–µ–∫:
// –ü–æ —à–∏—Ä–æ—Ç–µ: (56.0 - 55.5) / 0.00225 ‚âà 222 —è—á–µ–π–∫–∏
// –ü–æ –¥–æ–ª–≥–æ—Ç–µ: (38.0 - 37.0) / 0.0039 ‚âà 256 —è—á–µ–µ–∫
// –í—Å–µ–≥–æ: 222 * 256 = 56,832 —è—á–µ–µ–∫ (–Ω–æ —Ç–æ–ª—å–∫–æ —Å –î–¢–ü >= threshold)
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚è±Ô∏è **–í—Ä–µ–º—è:** ~2-5 —Å–µ–∫ –¥–ª—è 10000 —Å—Ç—Ä–æ–∫ –∏ 1000 —è—á–µ–µ–∫
- üíæ **–ü–∞–º—è—Ç—å:** ~20-100 MB
- üîÑ **–£–∑–∫–æ–µ –º–µ—Å—Ç–æ:** –ü–æ–∏—Å–∫ —è—á–µ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ (O(n*m), –≥–¥–µ n=–î–¢–ü, m=—è—á–µ–π–∫–∏)

### 2. –†–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (`api/hotspots.php`)

**–ü—É—Ç—å:** `api/hotspots.php:49-102`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
–î–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏:
1. –†–∞—Å—á–µ—Ç —Ü–µ–Ω—Ç—Ä–∞: centerLat = (minLat + maxLat) / 2
2. –†–∞—Å—á–µ—Ç —Ä–∞–¥–∏—É—Å–∞: radiusMeters = gridSize / 2
3. –†–∞—Å—á–µ—Ç –ø–ª–æ—â–∞–¥–∏: areaMeters = œÄ * r¬≤
4. –†–∞—Å—á–µ—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏: densityPer1000m2 = (count / areaMeters) * 1000
5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
   ‚îú‚îÄ high: densityPer1000m2 >= 0.3
   ‚îú‚îÄ medium: 0.1 <= densityPer1000m2 < 0.3
   ‚îî‚îÄ low: densityPer1000m2 < 0.1
6. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ GeoJSON Feature:
   ‚îî‚îÄ Point —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —Ü–µ–Ω—Ç—Ä–∞ + properties (count, density, risk_level, radius)
```

**–ü—Ä–∏–º–µ—Ä:**
```php
// –Ø—á–µ–π–∫–∞ —Å 10 –î–¢–ü, gridSize=250–º:
$radiusMeters = 250 / 2 = 125 –º–µ—Ç—Ä–æ–≤
$areaMeters = œÄ * 125¬≤ ‚âà 49,087 –º¬≤
$densityPer1000m2 = (10 / 49,087) * 1000 ‚âà 0.204
// –†–µ–∑—É–ª—å—Ç–∞—Ç: risk_level = 'medium' (0.1 <= 0.204 < 0.3)
```

---

## üì§ –ü–ï–†–ï–î–ê–ß–ê –î–ê–ù–ù–´–• –ù–ê FRONTEND

### 1. API Endpoint: `/api/hotspots.php`

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/hotspots.php?bbox=37.0,55.5,38.0,56.0&period=30d&threshold=5&grid=250
```

**–û—Ç–≤–µ—Ç (GeoJSON):**
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [37.6173, 55.7558]
      },
      "properties": {
        "count": 10,
        "severe_count": 2,
        "risk_level": "medium",
        "density_per_1000m2": 0.204,
        "area_m2": 49087.5,
        "radius": 125,
        "bbox": {...}
      }
    }
  ]
}
```

### 2. API Endpoint: `/api/accidents.php`

**–ó–∞–ø—Ä–æ—Å:**
```
GET /api/accidents.php?bbox=37.5,55.7,37.8,55.9&limit=1000
```

**–û—Ç–≤–µ—Ç (GeoJSON):**
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [37.6173, 55.7558]
      },
      "properties": {
        "id": 12345,
        "dt": "2023-05-15 14:30:00",
        "category": "–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ",
        "severity": "–°—Ä–µ–¥–Ω–∏–π",
        ...
      }
    }
  ]
}
```

---

## üó∫Ô∏è –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ù–ê –ö–ê–†–¢–ï

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã (`index.html`)

**–ü—É—Ç—å:** `index.html:504-621`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ó–∞–≥—Ä—É–∑–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç API
2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã: new ymaps.Map('map', {...})
3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π:
   ‚îú‚îÄ accidentsCollection (–¥–ª—è —Ç–æ—á–µ–∫ –î–¢–ü)
   ‚îî‚îÄ hotspotsCollection (–¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω)
4. –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω –æ–¥–∏–Ω —Ä–∞–∑: loadHotspotsOnce()
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ debounce –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –î–¢–ü –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω (`loadHotspotsOnce()`)

**–ü—É—Ç—å:** `index.html:624-762`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ hotspotsLoaded (–∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)
2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ UI:
   ‚îú‚îÄ period (–ø–µ—Ä–∏–æ–¥)
   ‚îú‚îÄ threshold (–ø–æ—Ä–æ–≥)
   ‚îî‚îÄ gridSize (—Ä–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏)
3. HTTP –∑–∞–ø—Ä–æ—Å: GET /api/hotspots.php?bbox=...&period=...&threshold=...&grid=...
4. –ü–∞—Ä—Å–∏–Ω–≥ GeoJSON –æ—Ç–≤–µ—Ç–∞
5. –î–ª—è –∫–∞–∂–¥–æ–π –∑–æ–Ω—ã:
   ‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ ymaps.Circle([center, radius], {...})
   ‚îú‚îÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ –ø–æ risk_level:
   ‚îÇ   ‚îú‚îÄ low: #f1c40f (–∂–µ–ª—Ç—ã–π)
   ‚îÇ   ‚îú‚îÄ medium: #f39c12 (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
   ‚îÇ   ‚îî‚îÄ high: #e74c3c (–∫—Ä–∞—Å–Ω—ã–π)
   ‚îú‚îÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–∞: loadAccidentsForZone()
   ‚îî‚îÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ hotspotsCollection
6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–∞ –∫–∞—Ä—Ç—É
7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ hotspotsLoaded = true
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚è±Ô∏è **–í—Ä–µ–º—è:** ~1-3 —Å–µ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–æ–Ω)
- üíæ **–ü–∞–º—è—Ç—å:** ~5-20 MB (–æ–±—ä–µ–∫—Ç—ã –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç)
- üîÑ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –î–¢–ü –¥–ª—è –∑–æ–Ω—ã (`loadAccidentsForZone()`)

**–ü—É—Ç—å:** `index.html:765-820`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ü–æ–ª—É—á–µ–Ω–∏–µ bbox –∑–æ–Ω—ã –∏–∑ zoneProps
2. HTTP –∑–∞–ø—Ä–æ—Å: GET /api/accidents.php?bbox=...&limit=1000
3. –ü–∞—Ä—Å–∏–Ω–≥ GeoJSON –æ—Ç–≤–µ—Ç–∞
4. –î–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –î–¢–ü:
   ‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ ymaps.Placemark([lat, lon], {...})
   ‚îî‚îÄ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ accidentsCollection
5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–∞ –∫–∞—Ä—Ç—É
```

**–¢—Ä–∏–≥–≥–µ—Ä:** –ö–ª–∏–∫ –Ω–∞ –æ–ø–∞—Å–Ω—É—é –∑–æ–Ω—É

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –î–¢–ü –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã (`loadAccidents()`)

**–ü—É—Ç—å:** `index.html:822-900` (–ø—Ä–∏–º–µ—Ä–Ω–æ)

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ–∫–±–æ–∫—Å–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏ –î–¢–ü"
2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ bbox –∫–∞—Ä—Ç—ã: map.getBounds()
3. Debounce (500–º—Å) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. HTTP –∑–∞–ø—Ä–æ—Å: GET /api/accidents.php?bbox=...&limit=...
5. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ—á–µ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ
```

**–¢—Ä–∏–≥–≥–µ—Ä:** –°–æ–±—ã—Ç–∏–µ `boundschange` –∫–∞—Ä—Ç—ã (—Å debounce 500–º—Å)

---

## ‚ö†Ô∏è –£–ó–ö–ò–ï –ú–ï–°–¢–ê –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–ó–ö–ò–ï –ú–ï–°–¢–ê:

#### 1. **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ (O(n))**
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ß–∏—Ç–∞–µ–º 10000 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ
- –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (91,748 —Å—Ç—Ä–æ–∫) —ç—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ü–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ 10000 —Å—Ç—Ä–æ–∫

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- üîÑ **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ñ–∞–π–ª–∞:** –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (B-tree –∏–ª–∏ spatial index)
- üîÑ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏:** –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –ø–∞–º—è—Ç—å (–µ—Å–ª–∏ —Ö–≤–∞—Ç–∞–µ—Ç RAM)
- üîÑ **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è:** –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–æ–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
- üîÑ **–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã PHP (yield) –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

#### 2. **–ü–æ–∏—Å–∫ —è—á–µ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ (O(n*m))**
**–ü—Ä–æ–±–ª–µ–º–∞:**
```php
// –¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 505):
foreach ($cells as &$cell) {
    if ($lat >= $cell['minLat'] && $lat <= $cell['maxLat'] &&
        $lon >= $cell['minLon'] && $lon <= $cell['maxLon']) {
        // –ù–∞–π–¥–µ–Ω–∞ —è—á–µ–π–∫–∞
        break;
    }
}
```
- –î–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –î–¢–ü –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —è—á–µ–π–∫–∏
- –ü—Ä–∏ 10000 –î–¢–ü –∏ 1000 —è—á–µ–µ–∫ = 10,000,000 –ø—Ä–æ–≤–µ—Ä–æ–∫

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- üîÑ **–•–µ—à-—Ç–∞–±–ª–∏—Ü–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º:** `$cellIndex[floor($lat*1000)][floor($lon*1000)] = $cell`
- üîÑ **–ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —è—á–µ–π–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- üîÑ **Spatial index:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å R-tree –∏–ª–∏ quadtree —Å—Ç—Ä—É–∫—Ç—É—Ä—É

#### 3. **JSON –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏**
**–ü—Ä–æ–±–ª–µ–º–∞:**
- `json_decode($line, true)` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏
- –ú–µ–¥–ª–µ–Ω–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- üîÑ **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (MessagePack, Protocol Buffers)
- üîÑ **Streaming JSON parser:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞

#### 4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã**
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–∞–∂–¥–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã ‚Üí –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- –ö–∞–∂–¥—ã–π –∫–ª–∏–∫ –Ω–∞ –∑–æ–Ω—É ‚Üí –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- ‚úÖ Debounce –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã (500–º—Å)
- ‚úÖ –û–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- üîÑ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:** –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage/IndexedDB
- üîÑ **WebSocket:** –ü—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üîÑ **Service Worker:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤

### üü° –°–†–ï–î–ù–ò–ï –£–ó–ö–ò–ï –ú–ï–°–¢–ê:

#### 5. **–°–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–∫—Ä—É–≥–∏ –Ω–∞ –∫–∞—Ä—Ç–µ)**
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ 1000+ –∑–æ–Ω–∞—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è 1000+ –æ–±—ä–µ–∫—Ç–æ–≤ `ymaps.Circle`
- –ú–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ä—Ç—ã

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `GeoObjectCollection` (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- üîÑ **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è:** –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –±–ª–∏–∑–∫–∏–µ –∑–æ–Ω—ã
- üîÑ **LOD (Level of Detail):** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏
- üîÑ **Canvas overlay:** –†–∏—Å–æ–≤–∞—Ç—å –∑–æ–Ω—ã –Ω–∞ canvas –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

#### 6. **–ü–µ—Ä–µ–¥–∞—á–∞ –±–æ–ª—å—à–∏—Ö JSON –æ—Ç–≤–µ—Ç–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:**
- GeoJSON —Å 1000+ features –º–æ–∂–µ—Ç –±—ã—Ç—å 1-5 MB
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å–µ—Ç–∏

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- üîÑ **–°–∂–∞—Ç–∏–µ (gzip):** –í–∫–ª—é—á–∏—Ç—å —Å–∂–∞—Ç–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- üîÑ **–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Protobuf –∏–ª–∏ MessagePack
- üîÑ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** –†–∞–∑–±–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### üü¢ –ú–ï–õ–ö–ò–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò:

#### 7. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**
- –†–∞—Å—á–µ—Ç `cos(deg2rad(...))` –¥–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏ ‚Üí –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –æ–¥–∏–Ω —Ä–∞–∑
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ `bbox` ‚Üí –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å

#### 8. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ú–æ—Å–∫–≤—ã (55-56, 37-38) ‚Üí –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã

---

## üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ (–¢–ï–ö–£–©–ê–Ø)

### –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω:
- **–í—Ä–µ–º—è:** 2-5 —Å–µ–∫—É–Ω–¥
- **–ü–∞–º—è—Ç—å:** 20-100 MB
- **–°—Ç—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:** 10000
- **–ó–æ–Ω —Å–æ–∑–¥–∞–Ω–æ:** 50-500 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç threshold –∏ gridSize)

### –ó–∞–≥—Ä—É–∑–∫–∞ –î–¢–ü:
- **–í—Ä–µ–º—è:** 0.5-2 —Å–µ–∫—É–Ω–¥—ã
- **–ü–∞–º—è—Ç—å:** 10-50 MB
- **–°—Ç—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:** 10000
- **–¢–æ—á–µ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ:** 0-2000 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç bbox –∏ limit)

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ:
- **–í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:** 1-3 —Å–µ–∫—É–Ω–¥—ã (–¥–ª—è 1000 –∑–æ–Ω)
- **–ü–∞–º—è—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞:** 50-200 MB

---

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–í—ã—Å–æ–∫–∏–π):
1. **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ñ–∞–π–ª–∞** - —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ —è—á–µ–π–∫–∏** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—É –≤–º–µ—Å—Ç–æ –ª–∏–Ω–µ–π–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ IndexedDB

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–°—Ä–µ–¥–Ω–∏–π):
4. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è** - —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–æ–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
5. **–°–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–æ–≤** - –≤–∫–ª—é—á–∏—Ç—å gzip –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
6. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∑–æ–Ω** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –±–ª–∏–∑–∫–∏–µ –∑–æ–Ω—ã –ø—Ä–∏ –æ—Ç–¥–∞–ª–µ–Ω–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ù–∏–∑–∫–∏–π):
7. **LOD (Level of Detail)** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏
8. **Web Workers** - –≤—ã–Ω–µ—Å—Ç–∏ —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
9. **Service Worker** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤

---

## üìù –ó–ê–ú–ï–¢–ö–ò

- **–¢–µ–∫—É—â–∏–π –ª–∏–º–∏—Ç —Å—Ç—Ä–æ–∫:** 10000 (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `api/data_loader.php:90,454`)
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** ~180 MB (91,748 —Å—Ç—Ä–æ–∫)
- **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:** NDJSON (Newline Delimited JSON)
- **API:** RESTful (GET –∑–∞–ø—Ä–æ—Å—ã)
- **–ö–∞—Ä—Ç–∞:** –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API 2.1

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-22
**–í–µ—Ä—Å–∏—è:** 1.0

